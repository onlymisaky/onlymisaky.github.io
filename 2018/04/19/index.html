<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="JavaScript 和 TypeScript 中的 class"><meta name="keywords" content="JavaScript,TypeScript,面向对象"><meta name="author" content="onlymisaky"><meta name="copyright" content="onlymisaky"><title>JavaScript 和 TypeScript 中的 class | Mikasa</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '7.3.0'
} </script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Mikasa" type="application/atom+xml">
</head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.</span> <span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.</span> <span class="toc-text">案例介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaScript-%E4%B8%AD%E7%9A%84-class"><span class="toc-number">3.</span> <span class="toc-text">JavaScript 中的 class</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ES6-%E4%B8%AD%E7%9A%84-class"><span class="toc-number">3.1.</span> <span class="toc-text">ES6 中的 class</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES6-%E4%B9%8B%E5%89%8D%E7%9A%84-class"><span class="toc-number">3.2.</span> <span class="toc-text">ES6 之前的 class</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TypeScript-%E4%B8%AD%E7%9A%84-class"><span class="toc-number">4.</span> <span class="toc-text">TypeScript 中的 class</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/data/img/avatar.png"></div><div class="author-info__name text-center">onlymisaky</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">24</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">20</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Mikasa</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">主页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/slides">演讲</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">JavaScript 和 TypeScript 中的 class</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-04-19</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>对于一个前端开发者来说，很少用到 class ，因为在 JavaScript 中更多的是 <code>函数式</code> 编程，抬手就是一个 <code>function</code>，几乎不见 class 或 new 的踪影。所以 <code>设计模式</code> 也是大多数前端开发者的一个短板。</p>
<p>最近在学习 <a target="_blank" rel="noopener" href="https://www.angular.cn/">Angular</a> 的过程中发现其大量的运用了 class，不得不佩服，Angular 确实是一个优秀的、值得深入研究的 <strong>框架</strong>。</p>
<p>本文将简单的介绍一下 <code>JavaScript</code> 和 <code>TypeScript</code> 中的 class。</p>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>在介绍 class 之前，要先介绍一些基本的概念。</p>
<ol>
<li><p>静态成员</p>
<p> 类自身的成员，可以继承，但实例无法访问，一般多见于工具类，比如在jQuery时代最常见的 <code>$.ajax</code> ，<code>ajax</code> 便是 <code>$</code> 的静态方法，使用方便，不需要再通过 <code>new</code> 或者函数调用的得到一个新实例。</p>
</li>
<li><p>私有成员</p>
<p> 类内部的成员，一般是不能继承的，只能在内部使用，实例无法访问，有一点点像闭包内部的变量，但是还是一定的差别，目前 JavaScript 无法直接定义私有成员，只能通过其它方式辅助实现。</p>
</li>
<li><p>getter&#x2F;setter</p>
<p> 存取器属性，当我们访问或者修改一个实例的属性的时候，我们可通过存取器属性拦截这两个操作，从而做一些其它的事情，<code>vue</code>正是通过这个api来实现对数据变化的追踪。</p>
</li>
<li><p>实例成员</p>
<p> 指 <code>new</code> 出来的实例所具有的成员，可以被继承，也是通过这个特性实现了代码的复用。</p>
</li>
<li><p>抽象类，抽象方法</p>
<p> 抽象类指不可以被实例化的类，通过 <code>new</code> 关键字调用会报错，一般都被设计成父类。</p>
<p> 抽象方法，只提供方法的名称，参数和返回值，不负责实现，具体的实现由子类去完成，如果一个子类继承于抽象类，那么这个子类必须实现父类所有的抽象方法，否则会报错。</p>
<p> 这两个概念在 JavaScript 都无法直接实现，但在 TypeScript 或 其它面向对象语言中可以轻松实现，另外这个特性也是用于实现 <code>多态</code> 的重要手段。</p>
</li>
</ol>
<h2 id="案例介绍"><a href="#案例介绍" class="headerlink" title="案例介绍"></a>案例介绍</h2><p>为了更好的介绍 class，本文将采用三个 <code>类</code> 来做例子，分别是 <code>Person</code>、<code>Chinese</code>、<code>American</code>。从字面上可以很快的知道： Person 是 <code>父类(基类)</code> ，Chinese 和 American 是 <code>子类(派生类)</code> 。</p>
<p>Person 有 name、age、gender 三个属性，sayHello 方法和 fullName 存取器属性。同时 Person 还有一些 <code>静态成员</code> 和 <code>私有成员</code> ，由于实在太难想例子了，所以就用 foo、bar、x、y、z 这些来代替吧。</p>
<p>作为子类的 Chinese 和 American 继承了 Person 的实例成员和静态成员。同时它们自身也有一些自己的方法和属性:</p>
<p>Chinese 有 kungfu 属性，会习武 martial。</p>
<p>American 有 twitter，还可以 sendTwitter。</p>
<p>接下来我们就分别使用 JavaScript 和 TypeScript 来实现这个案例。</p>
<h2 id="JavaScript-中的-class"><a href="#JavaScript-中的-class" class="headerlink" title="JavaScript 中的 class"></a>JavaScript 中的 class</h2><p>JavaScript 中的 class 要分开说，在 <code>ES6</code> 中提供了两个关键字 <code>class</code> 和 <code>extends</code> ，虽然它们只是语法糖，底层还是再利用 <code>prototype</code> 实现继承的，但是不能否认，这中写法确实让代码更清晰，更易读。</p>
<h3 id="ES6-中的-class"><a href="#ES6-中的-class" class="headerlink" title="ES6 中的 class"></a>ES6 中的 class</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// #x = &#x27;私有属性x&#x27;;</span></span><br><span class="line">    <span class="comment">// static x = &#x27;静态属性x&#x27;;</span></span><br><span class="line">    <span class="comment">// name;</span></span><br><span class="line">    <span class="comment">// age;</span></span><br><span class="line">    <span class="comment">// gender;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 上面的写法还在提案中，并没有成为正式标准，不过变化的可能性已经不大了。</span></span><br><span class="line">    <span class="comment">// 顺便吐槽一下，用 # 表示私有成员，真的是很无语.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Person的静态方法，可以被子类继承</span></span><br><span class="line"><span class="comment">     * 可以通过 this 访问静态成员</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`类 <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> 有一个 <span class="subst">$&#123;<span class="variable language_">this</span>.x&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, age, gender</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">gender</span> = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据存储器，可以访问实例成员，子类的实例可以继承</span></span><br><span class="line"><span class="comment">     * 以通过 this 访问实例成员</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">fullName</span>() &#123;</span><br><span class="line">        <span class="keyword">const</span> suffix = <span class="variable language_">this</span>.<span class="property">gender</span> === <span class="string">&#x27;男&#x27;</span> ? <span class="string">&#x27;先生&#x27;</span> : <span class="string">&#x27;女士&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span> + suffix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">fullName</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你已改名为 <span class="subst">$&#123;value&#125;</span> `</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Person的实例方法，可以被子类的实例继承</span></span><br><span class="line"><span class="comment">     * 可以通过 this 访问实例成员</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你好我是 <span class="subst">$&#123;<span class="variable language_">this</span>.fullName&#125;</span> ,我 <span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span> 岁了`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property">x</span> = <span class="string">&#x27;静态属性x&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Chinese</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">bar</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`类 <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> 的父类是 <span class="subst">$&#123;<span class="variable language_">super</span>.name&#125;</span>`</span>);</span><br><span class="line">        <span class="variable language_">super</span>.<span class="title function_">foo</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, age, gender, kungfu</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name, age, gender);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">kungfu</span> = kungfu;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">martial</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> 正在修炼 <span class="subst">$&#123;<span class="variable language_">this</span>.kungfu&#125;</span> `</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">American</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// static y = &#x27;静态属性y&#x27;;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">bar</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`类 <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> 有自己的 <span class="subst">$&#123;<span class="variable language_">this</span>.y&#125;</span> ，还继承了父类 <span class="subst">$&#123;<span class="variable language_">super</span>.name&#125;</span> 的 <span class="subst">$&#123;<span class="variable language_">super</span>.x&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, age, gender, twitter</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name, age, gender);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">twitter</span> = twitter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">sendTwitter</span>(<span class="params">msg</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> : `</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`  <span class="subst">$&#123;msg&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">American</span>.<span class="property">y</span> = <span class="string">&#x27;静态属性y&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Person</span>.<span class="property">x</span>;       <span class="comment">// 静态属性x</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="title function_">foo</span>();   <span class="comment">// 类 Person 有一个 静态属性x</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Chinese</span>.<span class="property">x</span>;      <span class="comment">// 静态属性x</span></span><br><span class="line"><span class="title class_">Chinese</span>.<span class="title function_">foo</span>();  <span class="comment">// 类 Chinese 有一个 静态属性x</span></span><br><span class="line"><span class="title class_">Chinese</span>.<span class="title function_">bar</span>();  <span class="comment">// 类 Chinese 的父类是 Person</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">American</span>.<span class="property">x</span>;     <span class="comment">// 静态属性x</span></span><br><span class="line"><span class="title class_">American</span>.<span class="property">y</span>;     <span class="comment">// &#x27;静态属性y</span></span><br><span class="line"><span class="title class_">American</span>.<span class="title function_">foo</span>(); <span class="comment">// 类 American 有一个 静态属性x</span></span><br><span class="line"><span class="title class_">American</span>.<span class="title function_">bar</span>(); <span class="comment">// 类 American 有自己的 静态属性y ，还继承了父类 Person 的 静态属性x</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;Lucy&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> <span class="title class_">Chinese</span>(<span class="string">&#x27;韩梅梅&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;咏春拳&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> a = <span class="keyword">new</span> <span class="title class_">American</span>(<span class="string">&#x27;特朗普&#x27;</span>, <span class="number">72</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;Donald J. Trump&#x27;</span>);</span><br><span class="line"></span><br><span class="line">c.<span class="title function_">sayHello</span>();   <span class="comment">// 你好我是 韩梅梅女士 ,我 18 岁了</span></span><br><span class="line">c.<span class="title function_">martial</span>();    <span class="comment">// 韩梅梅 正在修炼 咏春拳 </span></span><br><span class="line">a.<span class="title function_">sayHello</span>();   <span class="comment">// 你好我是 特朗普先生 ,我 72 岁了</span></span><br><span class="line">a.<span class="title function_">sendTwitter</span>(<span class="string">&#x27;推特治国&#x27;</span>);  <span class="comment">// 特朗普 : 推特治国</span></span><br></pre></td></tr></table></figure>

<h3 id="ES6-之前的-class"><a href="#ES6-之前的-class" class="headerlink" title="ES6 之前的 class"></a>ES6 之前的 class</h3><p>ES5 的继承，实质是先创造子类的实例对象 this，</p>
<p>然后再将父类的方法添加到 this 上面 Parent.apply(this) 。</p>
<p>ES6 的继承机制完全不同，实质是先创造父类的实例对象 this，所以必须先调用 super 方法，</p>
<p>然后再用子类的构造函数修改this。</p>
<p>为了实现继承，我们需要先实现一个 <code>extendsClass</code> 函数，它的作用是让子类继承父类的静态成员和实例成员。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">extendsClass</span>(<span class="params">parent, child</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 防止子类和父类相同名称的成员被父类覆盖</span></span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 继承静态成员</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> parent) &#123;</span><br><span class="line">        flag = k <span class="keyword">in</span> child;</span><br><span class="line">        <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">            child[k] = parent[k];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 继承父类prototype上的成员</span></span><br><span class="line">    <span class="comment">// 用一个新的构造函数切断父类和子类之间的数据共享</span></span><br><span class="line">    <span class="keyword">var</span> F = <span class="keyword">function</span> (<span class="params"></span>) &#123; &#125;</span><br><span class="line">    F.<span class="property"><span class="keyword">prototype</span></span> = parent.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="title function_">F</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> o) &#123;</span><br><span class="line">        flag = k <span class="keyword">in</span> child.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line">        <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">            child.<span class="property"><span class="keyword">prototype</span></span>[k] = o[k];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age, gender</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">gender</span> = <span class="variable language_">this</span>.<span class="property">gender</span>;</span><br><span class="line">    <span class="comment">// 如果将 getter/setter 写在 prototype 会获取不到</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">this</span>, <span class="string">&#x27;fullName&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> suffix = <span class="variable language_">this</span>.<span class="property">gender</span> === <span class="string">&#x27;男&#x27;</span> ? <span class="string">&#x27;先生&#x27;</span> : <span class="string">&#x27;女士&#x27;</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span> + suffix;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;你已改名为 &#x27;</span> + value + <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="property">x</span> = <span class="string">&#x27;静态属性x&#x27;</span>;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property">foo</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;类 &#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27; 有一个 &#x27;</span> + <span class="variable language_">this</span>.<span class="property">x</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">    <span class="attr">constructor</span>: <span class="title class_">Person</span>,</span><br><span class="line">    <span class="comment">// get fullName() &#123; &#125;,</span></span><br><span class="line">    <span class="comment">// set fullName(value) &#123; &#125;,</span></span><br><span class="line">    <span class="attr">sayHello</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;你好我是 &#x27;</span> + <span class="variable language_">this</span>.<span class="property">fullName</span> + <span class="string">&#x27; ,我 &#x27;</span> + <span class="variable language_">this</span>.<span class="property">age</span> + <span class="string">&#x27; 了&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Chinese</span>(<span class="params">name, age, gender, kungfu</span>) &#123;</span><br><span class="line">    <span class="comment">// 用call改变this指向，实现继承父类的实例属性</span></span><br><span class="line">    <span class="title class_">Person</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name, age, gender);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">kungfu</span> = kungfu;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Chinese</span>.<span class="property">bar</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;类 &#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27; 的父类是 &#x27;</span> + <span class="title class_">Person</span>.<span class="property">name</span>);</span><br><span class="line">    <span class="title class_">Person</span>.<span class="title function_">foo</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Chinese</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">    <span class="attr">constructor</span>: <span class="title class_">Chinese</span>,</span><br><span class="line">    <span class="attr">martial</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27; 正在修炼 &#x27;</span> + <span class="variable language_">this</span>.<span class="property">kungfu</span> + <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">extendsClass</span>(<span class="title class_">Person</span>, <span class="title class_">Chinese</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">American</span>(<span class="params">name, age, gender, twitter</span>) &#123;</span><br><span class="line">    <span class="title class_">Person</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name, age, gender);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">twitter</span> = twitter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">American</span>.<span class="property">y</span> = <span class="string">&#x27;静态属性y&#x27;</span>;</span><br><span class="line"><span class="title class_">American</span>.<span class="property">bar</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;类 &#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27; 有自己的 &#x27;</span> + <span class="variable language_">this</span>.<span class="property">y</span> + <span class="string">&#x27; ，还继承了父类 &#x27;</span> + <span class="title class_">Person</span>.<span class="property">name</span> + <span class="string">&#x27; 的 &#x27;</span> + <span class="title class_">Person</span>.<span class="property">x</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">American</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">    <span class="attr">constructor</span>: <span class="title class_">American</span>,</span><br><span class="line">    <span class="attr">sendTwitter</span>: <span class="keyword">function</span> (<span class="params">msg</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27; : &#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;  &#x27;</span> + msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">extendsClass</span>(<span class="title class_">Person</span>, <span class="title class_">American</span>);</span><br></pre></td></tr></table></figure>

<h2 id="TypeScript-中的-class"><a href="#TypeScript-中的-class" class="headerlink" title="TypeScript 中的 class"></a>TypeScript 中的 class</h2><p>讲完了 JavaScript 中的类，还是没有用到 抽象类，抽象方法，私有方法这三个概念，由于 JavaScript 语言的局限性，想要实现这三种概念是很困难的，但是在 TypeScript 可以轻松的实现这一特性。</p>
<p>首先我们稍微修改一下例子中的描述，<strong>Person 是抽象类</strong>，因为一个正常的人肯定是有国籍的，Person 的 sayHello 方法是抽象方法，因为每个国家打招呼的方式不一样。另外一个人的性别是只能读取，不能修改的，且是确定的是，不是男生就是女生，所以还要借助一下枚举。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">enum <span class="title class_">Gender</span> &#123;</span><br><span class="line">    female = <span class="number">0</span>,</span><br><span class="line">    male = <span class="number">1</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">abstract <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    private <span class="attr">x</span>: string = <span class="string">&#x27;私有属性x，子类和实例都无法访问&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    protected <span class="attr">y</span>: string = <span class="string">&#x27;私有属性y，子类可以访问，实例无法访问&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attr">name</span>: string;</span><br><span class="line">    public <span class="attr">age</span>: number;</span><br><span class="line">    public readonly <span class="attr">gender</span>: <span class="title class_">Gender</span>; <span class="comment">// 用关键字 readonly 表明这是一个只读属性</span></span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> <span class="attr">x</span>: string = <span class="string">&#x27;静态属性x&#x27;</span>;</span><br><span class="line">    public <span class="keyword">static</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`类 <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> 有一个 <span class="subst">$&#123;<span class="variable language_">this</span>.x&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: string, age: number, gender: Gender</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">gender</span> = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">fullName</span>(): string &#123;</span><br><span class="line">        <span class="keyword">const</span> suffix = <span class="variable language_">this</span>.<span class="property">gender</span> === <span class="number">1</span> ? <span class="string">&#x27;先生&#x27;</span> : <span class="string">&#x27;女士&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span> + suffix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">FullName</span>(<span class="params">value: string</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你已改名为 <span class="subst">$&#123;value&#125;</span> `</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 抽象方法，具体实现交由子类完成</span></span><br><span class="line">    abstract <span class="title function_">sayHello</span>(): <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Chinese</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    public <span class="attr">kungfu</span>: string;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> <span class="title function_">bar</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`类 <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> 的父类是 <span class="subst">$&#123;<span class="variable language_">super</span>.name&#125;</span>`</span>);</span><br><span class="line">        <span class="variable language_">super</span>.<span class="title function_">foo</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="title function_">constructor</span>(<span class="params">name: string, age: number, gender: Gender, kungfu: string</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name, age, gender);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">kungfu</span> = kungfu;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="title function_">sayHello</span>(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你好我是 <span class="subst">$&#123;<span class="variable language_">this</span>.fullName&#125;</span> ,我 <span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span> 岁了`</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="title function_">martial</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> 正在修炼 <span class="subst">$&#123;<span class="variable language_">this</span>.kungfu&#125;</span> `</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">American</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> y = <span class="string">&#x27;静态属性y&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> <span class="title function_">bar</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`类 <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> 有自己的 <span class="subst">$&#123;<span class="variable language_">this</span>.y&#125;</span> ，还继承了父类 <span class="subst">$&#123;<span class="variable language_">super</span>.name&#125;</span> 的 <span class="subst">$&#123;<span class="variable language_">super</span>.x&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="attr">twitter</span>: string;</span><br><span class="line"></span><br><span class="line">    public <span class="title function_">constructor</span>(<span class="params">name: string, age: number, gender: Gender, twitter: string</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name, age, gender);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">twitter</span> = twitter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="title function_">sayHello</span>(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, I am <span class="subst">$&#123;<span class="variable language_">this</span>.fullName&#125;</span> , I&#x27;m <span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span> years old`</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="title function_">sendTwitter</span>(<span class="attr">msg</span>: string): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> : `</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`  <span class="subst">$&#123;msg&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Person</span>.<span class="property">x</span>;       <span class="comment">// 静态属性x</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="title function_">foo</span>();   <span class="comment">// 类 Person 有一个 静态属性x</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Chinese</span>.<span class="property">x</span>;      <span class="comment">// 静态属性x</span></span><br><span class="line"><span class="title class_">Chinese</span>.<span class="title function_">foo</span>();  <span class="comment">// 类 Chinese 有一个 静态属性x</span></span><br><span class="line"><span class="title class_">Chinese</span>.<span class="title function_">bar</span>();  <span class="comment">// 类 Chinese 的父类是 Person</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">American</span>.<span class="property">x</span>;     <span class="comment">// 静态属性x</span></span><br><span class="line"><span class="title class_">American</span>.<span class="property">y</span>;     <span class="comment">// &#x27;静态属性y</span></span><br><span class="line"><span class="title class_">American</span>.<span class="title function_">foo</span>(); <span class="comment">// 类 American 有一个 静态属性x</span></span><br><span class="line"><span class="title class_">American</span>.<span class="title function_">bar</span>(); <span class="comment">// 类 American 有自己的 静态属性y ，还继承了父类 Person 的 静态属性x</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">c</span>: <span class="title class_">Chinese</span> = <span class="keyword">new</span> <span class="title class_">Chinese</span>(<span class="string">&#x27;韩梅梅&#x27;</span>, <span class="number">18</span>, <span class="title class_">Gender</span>.<span class="property">female</span>, <span class="string">&#x27;咏春拳&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="attr">a</span>: <span class="title class_">American</span> = <span class="keyword">new</span> <span class="title class_">American</span>(<span class="string">&#x27;特朗普&#x27;</span>, <span class="number">72</span>, <span class="title class_">Gender</span>.<span class="property">male</span>, <span class="string">&#x27;Donald J. Trump&#x27;</span>);</span><br><span class="line"></span><br><span class="line">c.<span class="title function_">sayHello</span>();   <span class="comment">// 你好我是 韩梅梅女士 ,我 18 岁了</span></span><br><span class="line">c.<span class="title function_">martial</span>();    <span class="comment">// 韩梅梅 正在修炼 咏春拳 </span></span><br><span class="line">a.<span class="title function_">sayHello</span>();   <span class="comment">// Hello, I am 特朗普先生 , I&#x27;m 72 years old</span></span><br><span class="line">a.<span class="title function_">sendTwitter</span>(<span class="string">&#x27;推特治国&#x27;</span>);  <span class="comment">// 特朗普 : 推特治国</span></span><br></pre></td></tr></table></figure>

</div></article><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript</a><a class="post-meta__tags" href="/tags/TypeScript/">TypeScript</a><a class="post-meta__tags" href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">面向对象</a></div><div class="post-qr-code"><div class="post-qr-code-item"><img class="post-qr-code__img" src="/data/img/wechat.jpeg"><div class="post-qr-code__desc">请我喝杯咖啡</div></div><div class="post-qr-code-item"><img class="post-qr-code__img" src="/data/img/alipay.jpg"><div class="post-qr-code__desc">请我喝杯咖啡</div></div></div><div class="social-share pull-right"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/2018/05/10/"><i class="fa fa-chevron-left">  </i><span>记一次node转发接口的配置经历</span></a></div><div class="next-post pull-right"><a href="/2018/03/08/"><span>Cmder Windows 下的终端神器</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="vcomment"></div><script src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = 'true' == 'true';
var verify = 'false' == 'true';
var record_ip = '' == 'true';
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  recordIP:record_ip,
  appId:'YrE19blOm57GQPNTt88rSVH1-gzGzoHsz',
  appKey:'oRNhpwKhbCysF0mGtcnONIQA',
  placeholder:'快来评论吧',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10',
  lang: 'zh-cn'
})</script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2024 By onlymisaky</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Hey! You Find Me!</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>